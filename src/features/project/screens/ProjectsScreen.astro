---
import type { LanguageCode, ui, defaultLanguage } from '@/i18n/ui';
import SectionCard from '@/components/section-card.astro';
import { EmptyState } from '@/components/empty-state';
import Heading from '@/components/Heading.astro';
import type { TranslatedProject } from '../type';

export type Props = {
  projects: Array<TranslatedProject>;
  t: (typeof ui)[LanguageCode];
  lang: LanguageCode;
};

const { projects, t, lang } = Astro.props;
const projectsPageTranslations = t.projectsPage; // For easier access
---

<div class="container mx-auto px-8 py-8 md:py-32">
  <Heading title={projectsPageTranslations?.title ?? 'Projects'} />
  {
    projects && projects.length > 0 ? (
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
        {projects.map((project: TranslatedProject) => {
          const projectUrl =
            lang === 'en'
              ? `/project/${project.slug}`
              : `/${lang}/project/${project.slug}`;
          return (
            <a
              href={projectUrl}
              aria-label={`View project ${project.title}`}
              class="flex rounded-lg transition-shadow duration-200 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
            >
              <SectionCard
                title={project.title}
                categoryText={project.categoryText}
                className="w-full"
                classNameTitle="text-xl"
                tags={project.tags ?? []}
                imageUrl={project.imageUrl}
                imageAltText={project.imageAltText}
              >
                <p class="text-sm text-muted-foreground">
                  {project.description}
                </p>
              </SectionCard>
            </a>
          );
        })}
      </div>
    ) : (
      <EmptyState
        title={projectsPageTranslations?.noProjects}
        description={projectsPageTranslations?.noProjectsDescription}
      />
    )
  }
</div>
